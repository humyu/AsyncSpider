# AsyncSpider

## 并发与并行
- 并发：指多个线程对应的多条指令被快速地轮换执行。 在宏观上看起来是同时执行的效果，但在微观上并不是同时执行的。
  因此同一时刻其实只有一个线程被执行。
- 并行：指同一时刻有多条指令在多个处理器上同时执行。不论从宏观还是微观，多个线程都是在同一时刻一起执行的。

> 但是由于 GIL 锁存在，python 里一个进程永远只能同一时刻执行一个线程 (拿到 GIL 的线程才能执行)，所以python多线程无法发挥多核并行的优势。

### 多线程
- 使用 threading 模块中的 Thread 类创建线程，通过
```for _ in range(n): t = threading.Thread(target)```来创建多线程对象

### 线程池
- multiprocessing.dummy 所提供的 Pool 函数会返回一个 ThreadPool 的实例，该类是 Pool 的子类，它支持所有相同的方法调用但会使用一个
  工作线程池而非工作进程池
- 从Python3.2开始，标准库为我们提供了 concurrent.futures 模块，它提供了 ThreadPoolExecutor (线程池)和ProcessPoolExecutor (进程池)
  两个类。
  
### 多进程
- multiprocessing 模块提供了一个Process类来代表一个进程对象
  
### 进程池
- multiprocessing 模块的 Process 类
- multiprocessing 模块的 Pool 类
- 从Python3.2开始，标准库为我们提供了 concurrent.futures 模块，它提供了 ThreadPoolExecutor (线程池)和ProcessPoolExecutor (进程池)
  两个类。

#### 多线程和多进程对比
- 多线程和多进程都是可以同时执行多个任务，进程和线程的调度是由操作系统自动完成。
- 进程：每个进程都有自己独立的内存空间，不同进程之间的内存空间不共享。每个进程相对独立，可以更好地利用多核CPU的资源。进程之间的通信由操作系统传递，
  导致通讯效率低，切换开销大。
- 线程：一个进程可以有多个线程，所有线程共享进程的内存空间，通讯效率高，切换开销小，但是对CPU的利用率不如进程。  
- IO密集型代码(文件处理、网络爬虫等)，多线程能够有效提升效率(单线程下有IO操作会进行IO等待，造成不必要的时间浪费，而开启多线程能在线程A等待时，
  自动切换到线程B，可以不浪费CPU的资源，从而能提升程序执行效率)。在实际的数据采集过程中，既考虑网速和响应的问题，也需要考虑自身机器的硬件情况，来设置多进程或多线程。